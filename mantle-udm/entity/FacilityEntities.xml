<?xml version="1.0" encoding="UTF-8"?>
<!--
This software is in the public domain under CC0 1.0 Universal.

To the extent possible under law, the author(s) have dedicated all
copyright and related and neighboring rights to this software to the
public domain worldwide. This software is distributed without any
warranty.

You should have received a copy of the CC0 Public Domain Dedication
along with this software (see the LICENSE.md file). If not, see
<http://creativecommons.org/publicdomain/zero/1.0/>.
-->
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-1.5.xsd">

    <!-- ========================================================= -->
    <!-- mantle.facility -->
    <!-- ========================================================= -->

    <entity entity-name="Facility" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="pseudoId" type="id" default="facilityId"/>
        <field name="facilityTypeEnumId" type="id"/>
        <field name="parentFacilityId" type="id"/>
        <field name="statusId" type="id"/>
        <field name="ownerPartyId" type="id"/>
        <field name="facilityName" type="text-medium"/>
        <field name="facilitySize" type="number-decimal"/>
        <field name="facilitySizeUomId" type="id"/>
        <field name="openedDate" type="date-time"/>
        <field name="closedDate" type="date-time"/>
        <field name="description" type="text-medium"/>
        <field name="geoId" type="id"><description>A geographic boundary describing the area of the facility (not a geographic boundary like a state that the facility is in).</description></field>
        <field name="geoPointId" type="id"/>
        <field name="assetAllowOtherOwner" type="text-indicator"/>
        <field name="defaultDaysToShip" type="number-integer"/>
        <relationship type="one" title="FacilityType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="facilityTypeEnumId"/></relationship>
        <relationship type="one" title="Parent" related-entity-name="mantle.facility.Facility">
            <key-map field-name="parentFacilityId" related-field-name="facilityId"/></relationship>
        <relationship type="one" title="Facility" related-entity-name="moqui.basic.StatusItem"/>
        <relationship type="one" title="Owner" related-entity-name="mantle.party.Party">
            <key-map field-name="ownerPartyId"/></relationship>
        <relationship type="one-nofk" title="Owner" related-entity-name="mantle.party.Organization">
            <key-map field-name="ownerPartyId"/></relationship>
        <relationship type="one-nofk" title="Owner" related-entity-name="mantle.party.Person">
            <key-map field-name="ownerPartyId"/></relationship>
        <relationship type="one" title="FacilitySize" related-entity-name="moqui.basic.Uom">
            <key-map field-name="facilitySizeUomId"/></relationship>
        <relationship type="one" related-entity-name="moqui.basic.Geo"/>
        <relationship type="one" related-entity-name="moqui.basic.GeoPoint"/>
        <relationship type="many" related-entity-name="mantle.facility.FacilityContactMech">
            <key-map field-name="facilityId"/></relationship>
        <seed-data>
            <!-- Facility Type -->
            <moqui.basic.EnumerationType description="Facility Type" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Block" enumId="FcTpBlock" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Building" enumId="FcTpBuilding" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Land" enumId="FcTpLand" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Floor" enumId="FcTpFloor" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Office" enumId="FcTpOffice" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Call Center" enumId="FcTpCallCenter" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Plant" enumId="FcTpPlant" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Room" enumId="FcTpRoom" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Retail Store" enumId="FcTpRetailStore" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Warehouse" enumId="FcTpWarehouse" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Dock" enumId="FcTpDock" enumTypeId="FacilityType"/>
            <moqui.basic.Enumeration description="Production Line" enumId="FcTpLine" enumTypeId="FacilityType"/>

            <!-- Facility Status -->
            <moqui.basic.StatusType description="Facility" statusTypeId="Facility"/>
        </seed-data>
    </entity>
    <entity entity-name="FacilityCertification" package-name="mantle.facility">
        <field name="facilityCertificationId" type="id" is-pk="true"/>
        <field name="facilityId" type="id"/>
        <field name="certificationTypeEnumId" type="id"/>
        <field name="fromDate" type="date"/>
        <field name="thruDate" type="date"/>
        <field name="contactPartyId" type="id"/>
        <field name="auditorPartyId" type="id"/>
        <field name="auditorOrgPartyId" type="id"/>
        <field name="auditStartDate" type="date-time"/>
        <field name="auditEndDate" type="date-time"/>
        <field name="auditScore" type="text-short"/>
        <field name="certRegistrationId" type="text-short"/>
        <field name="otherCertId" type="text-short"/>
        <field name="documentLocation" type="text-medium"/>

        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" title="FacilityCertificationType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="certificationTypeEnumId"/></relationship>
        <relationship type="one" title="Contact" related-entity-name="mantle.party.Party">
            <key-map field-name="contactPartyId"/></relationship>
        <relationship type="one" title="Auditor" related-entity-name="mantle.party.Party">
            <key-map field-name="auditorPartyId"/></relationship>
        <relationship type="one" title="AuditorOrg" related-entity-name="mantle.party.Party">
            <key-map field-name="auditorOrgPartyId"/></relationship>

        <seed-data>
            <moqui.basic.EnumerationType description="Facility Certification Type" enumTypeId="FacilityCertificationType"/>
        </seed-data>
    </entity>

    <entity entity-name="FacilityContactMech" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="contactMechId" type="id" is-pk="true"/>
        <field name="contactMechPurposeId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <field name="extension" type="text-short"/>
        <field name="comments" type="text-medium"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" related-entity-name="mantle.party.contact.ContactMech"/>
        <relationship type="one" related-entity-name="mantle.party.contact.ContactMechPurpose"/>
        <relationship type="one-nofk" related-entity-name="mantle.party.contact.PostalAddress"/>
        <relationship type="one-nofk" related-entity-name="mantle.party.contact.TelecomNumber"/>
    </entity>
    <entity entity-name="FacilityContent" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="contentLocation" type="text-medium" is-pk="true"/>
        <field name="facilityContentTypeEnumId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" title="FacilityContentType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="facilityContentTypeEnumId"/></relationship>
        <seed-data>
            <!-- Facility Content Type -->
            <moqui.basic.EnumerationType description="Facility Content Type" enumTypeId="FacilityContentType"/>
            <moqui.basic.Enumeration description="Internal Content" enumId="FcntInternal" enumTypeId="FacilityContentType"/>
            <moqui.basic.Enumeration description="User Defined Content"  enumId="FcntUserDefined" enumTypeId="FacilityContentType"/>
            <moqui.basic.Enumeration description="Image URL"  enumId="FcntImageUrl" enumTypeId="FacilityContentType"/>
        </seed-data>
    </entity>
    <entity entity-name="FacilityGroup" package-name="mantle.facility">
        <field name="facilityGroupId" type="id" is-pk="true"/>
        <field name="parentGroupId" type="id"/>
        <field name="facilityGroupTypeEnumId" type="id"/>
        <field name="description" type="text-medium"/>
        <relationship type="one" title="Parent" related-entity-name="mantle.facility.FacilityGroup">
            <key-map field-name="parentGroupId" related-field-name="facilityGroupId"/></relationship>
        <relationship type="one" title="FacilityGroupType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="facilityGroupTypeEnumId"/></relationship>
        <seed-data>
            <!-- Facility Group Type -->
            <moqui.basic.EnumerationType description="Facility Group Type" enumTypeId="FacilityGroupType"/>
            <moqui.basic.Enumeration description="Management Structure" enumId="MGMT_STRUCTURE" enumTypeId="FacilityGroupType"/>
            <moqui.basic.Enumeration description="Pricing Group" enumId="PRICING_GROUP" enumTypeId="FacilityGroupType"/>
        </seed-data>
    </entity>
    <entity entity-name="FacilityGroupMember" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="facilityGroupId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <field name="sequenceNum" type="number-integer"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" related-entity-name="mantle.facility.FacilityGroup"/>
    </entity>
    <entity entity-name="FacilityGroupParty" package-name="mantle.facility">
        <field name="facilityGroupId" type="id" is-pk="true"/>
        <field name="partyId" type="id" is-pk="true"/>
        <field name="roleTypeId" type="id" is-pk="true"/>
        <relationship type="one" related-entity-name="mantle.facility.FacilityGroup"/>
        <relationship type="one" related-entity-name="mantle.party.Party"/>
        <relationship type="one" related-entity-name="mantle.party.RoleType"/>
    </entity>
    <entity entity-name="FacilityLocation" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="locationSeqId" type="id" is-pk="true"/>
        <field name="locationTypeEnumId" type="id"/>
        <field name="description" type="text-medium"/>
        <field name="areaId" type="id"/>
        <field name="aisleId" type="id"/>
        <field name="sectionId" type="id"/>
        <field name="levelId" type="id"/>
        <field name="positionId" type="id"/>
        <field name="geoPointId" type="id" enable-audit-log="true"/>
        <field name="capacity" type="number-decimal"/>
        <field name="capacityUomId" type="id"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" title="FacilityLocationType" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="locationTypeEnumId"/></relationship>
        <relationship type="one" title="Capacity" related-entity-name="moqui.basic.Uom">
            <key-map field-name="capacityUomId"/></relationship>
        <seed-data>
            <!-- Facility Location Type -->
            <moqui.basic.EnumerationType description="Facility Location Type" enumTypeId="FacilityLocationType"/>
            <moqui.basic.Enumeration description="Pick/Primary" enumId="FLT_PICKLOC" enumTypeId="FacilityLocationType"/>
            <moqui.basic.Enumeration description="Bulk" enumId="FLT_BULK" enumTypeId="FacilityLocationType"/>
        </seed-data>
    </entity>
    <entity entity-name="FacilityNote" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="noteDate" type="date-time" is-pk="true"/>
        <field name="userId" type="id-long"/>
        <field name="noteText" type="text-very-long"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" related-entity-name="moqui.security.UserAccount"/>
    </entity>
    <entity entity-name="FacilityParty" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="partyId" type="id" is-pk="true"/>
        <field name="roleTypeId" type="id" is-pk="true"/>
        <field name="fromDate" type="date-time" is-pk="true"/>
        <field name="thruDate" type="date-time"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" related-entity-name="mantle.party.Party"/>
        <relationship type="one" related-entity-name="mantle.party.RoleType"/>
    </entity>
    <view-entity entity-name="FacilityAndParty" package-name="mantle.facility">
        <member-entity entity-alias="FACPTY" entity-name="mantle.facility.FacilityParty"/>
        <member-entity entity-alias="FAC" entity-name="mantle.facility.Facility" join-from-alias="FACPTY">
            <key-map field-name="facilityId"/></member-entity>
        <member-entity entity-alias="ORG" entity-name="mantle.party.Organization" join-from-alias="FACPTY" join-optional="true">
            <key-map field-name="partyId"/></member-entity>
        <alias-all entity-alias="FACPTY"/>
        <alias-all entity-alias="FAC"/>
        <alias entity-alias="ORG" name="organizationName"/>
    </view-entity>
    <entity entity-name="FacilityPrinter" package-name="mantle.facility">
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="printerPurposeEnumId" type="id" is-pk="true"/>
        <field name="networkPrinterId" type="id"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
        <relationship type="one" title="PrinterPurpose" related-entity-name="moqui.basic.Enumeration">
            <key-map field-name="printerPurposeEnumId"/></relationship>
        <relationship type="one" related-entity-name="moqui.basic.print.NetworkPrinter"/>
        <seed-data>
            <moqui.basic.EnumerationType description="Printer Purpose" enumTypeId="PrinterPurpose"/>
            <moqui.basic.Enumeration description="Container Label" enumId="PtpContainerLabel" enumTypeId="PrinterPurpose"/>
            <moqui.basic.Enumeration description="Package Label" enumId="PtpPackageLabel" enumTypeId="PrinterPurpose"/>
            <moqui.basic.Enumeration description="Picking Documents" enumId="PtpPickingDocuments" enumTypeId="PrinterPurpose"/>
            <moqui.basic.Enumeration description="Packing Documents" enumId="PtpPackingDocuments" enumTypeId="PrinterPurpose"/>
            <moqui.basic.Enumeration description="Shipment Documents" enumId="PtpShipmentDocuments" enumTypeId="PrinterPurpose"/>
        </seed-data>
    </entity>
    <entity entity-name="ProductFacility" package-name="mantle.facility">
        <field name="productId" type="id" is-pk="true"/>
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="minimumStock" type="number-decimal"/>
        <field name="reorderQuantity" type="number-decimal"/>
        <field name="daysToShip" type="number-integer"/>
        <relationship type="one" related-entity-name="mantle.product.Product"/>
        <relationship type="one" related-entity-name="mantle.facility.Facility"/>
    </entity>
    <entity entity-name="ProductFacilityLocation" package-name="mantle.facility">
        <field name="productId" type="id" is-pk="true"/>
        <field name="facilityId" type="id" is-pk="true"/>
        <field name="locationSeqId" type="id" is-pk="true"/>
        <field name="minimumStock" type="number-decimal"/>
        <field name="moveQuantity" type="number-decimal"/>
        <relationship type="one" related-entity-name="mantle.product.Product"/>
        <relationship type="one" related-entity-name="mantle.facility.FacilityLocation">
            <key-map field-name="facilityId"/><key-map field-name="locationSeqId"/></relationship>
    </entity>
</entities>
